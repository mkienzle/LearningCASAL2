source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
head(data.tab)
head(sim$nb.after.FirstHalfNatMort)
seq(1,10)
rm(list = ls()))
rm(list = ls())
nb.of.preExploitation.years = 50
max.age = 10; nb.of.preExploitation.years = 50; nb.of.exploitation.years = 20
nb.of.cohors <- nb.of.preExploitation.years + nb.of.exploitation.years + max.age - 1
exploitation.rate.by.years.since.the.first.cohort.was.bort <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2])
exploitation.rate.by.years.since.the.first.cohort.was.bort <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
nb.of.cohorts <- nb.of.preExploitation.years + nb.of.exploitation.years + max.age - 1
exploitation.rate.by.years.since.the.first.cohort.was.bort <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
exploitation.rate = c(0.2, 0.2)
exploitation.rate.by.years.since.the.first.cohort.was.bort <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
ExplRate.faced.by.each.cohort <- matrix(nrow = nb.of.cohort, ncol = max.age)
for(i in 1:nb.of.cohort) ExplRate.faced.by.each.cohort[i,] <- yearly.exploitation.rate[seq(i, i + max.age - 1)]
ExplRate.faced.by.each.cohort <- matrix(nrow = nb.of.cohorts, ncol = max.age)
for(i in 1:nb.of.cohorts) ExplRate.faced.by.each.cohort[i,] <- yearly.exploitation.rate[seq(i, i + max.age - 1)]
## Exploitation rate
# The exploitation rate is 0 for the nb of pre-exploitation years
# For ease of simulation
exploitation.rate.by.years.since.the.first.cohort.was.born <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
ExplRate.faced.by.each.cohort <- matrix(nrow = nb.of.cohorts, ncol = max.age)
for(i in 1:nb.of.cohorts) ExplRate.faced.by.each.cohort[i,] <- exploitation.rate.by.years.since.the.first.cohort.was.born[seq(i, i + max.age - 1)]
ExplRate.faced.by.each.cohort
max.age = 10; nb.of.preExploitation.years = 50; nb.of.exploitation.years = 20; exploitation.rate = c(0.2, 0.2)
nb.of.cohorts <- nb.of.preExploitation.years + nb.of.exploitation.years + max.age - 1
nb.of.cohorts
exploitation.rate.by.years.since.the.first.cohort.was.born <- c(rep(0, nb.of.cohorts), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
length(exploitation.rate.by.years.since.the.first.cohort.was.born)
exploitation.rate.by.years.since.the.first.cohort.was.born <- c(rep(0, nb.of.preExploitation.years + max.age - 1), runif(nb.of.exploitation.years, min = exploitation.rate[1], max = exploitation.rate[2]))
ExplRate.faced.by.each.cohort <- matrix(nrow = nb.of.cohorts, ncol = max.age)
for(i in 1:nb.of.cohorts) ExplRate.faced.by.each.cohort[i,] <- exploitation.rate.by.years.since.the.first.cohort.was.born[seq(i, i + max.age - 1)]
ExplRate.faced.by.each.cohort
source("SimulationFunctions.R")
Simulate.pulsefishing.Fishery2()
source("SimulationFunctions.R")
Simulate.pulsefishing.Fishery2()
source("SimulationFunctions.R")
Simulate.pulsefishing.Fishery2()
source("SimulationFunctions.R")
Simulate.pulsefishing.Fishery2()
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
data.tab
getwd()
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
source("SimulationStudy.R")
?scan
grep('YearCros',readLines("/tmp/output.txt"))
readLines("/tmp/output.txt")
grep('year_age_matrix',readLines("/tmp/output.txt"))
grep('*end',readLines("/tmp/output.txt"))
scan("/tmp/output.txt", skip = 613)
scan("/tmp/output.txt", skip = 613, nlines = n.year)
scan("/tmp/output.txt", skip = 613, nlines = n.years)
combination.of.par
scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohorts - combination.of.par$max.age + 1)
scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohorts - combination.of.par$max.age)
scan("/tmp/output.txt", skip = 613, nlines = 1)
scan("/tmp/output.txt", skip = 613, nlines = 2)
scan("/tmp/output.txt", skip = 613, nlines = c(1,2))
?scan
scan("/tmp/output.txt", skip = 613, nlines = 2)
combination.of.par$nb.of.cohorts - combination.of.par$max.age
combination.of.par$nb.of.cohorts[1] - combination.of.par$max.age[1] + 1
combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1
scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1])
scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1) 
matrix(scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age) 
matrix(scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age, byrow=T) 
matrix(scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age + 1, byrow=T) 
matrix(scan("/tmp/output.txt", skip = 613, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age + 2, byrow=T) 
matrix(scan("/tmp/output.txt", skip = 613 + 1, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age + 1, byrow=T) 
grep('year_age_matrix',readLines("/tmp/output.txt"))
line.start <- grep('year_age_matrix',readLines("/tmp/output.txt"))
tmp.mat <- matrix(scan("/tmp/output.txt", skip = line.start + 2, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age + 1, byrow=T)
data.tab <- as.data.frame(tmp.dat[,-1]); dimnames(data.tab)[[1]] <- data.tab[,1]; dimnames(data.tab)[[2]] <- scan("/tmp/output.txt", skip = line.start + 1, nlines =1)
line.start <- grep('year_age_matrix',readLines("/tmp/output.txt"))
tmp.mat <- matrix(scan("/tmp/output.txt", skip = line.start + 2, nlines = combination.of.par$nb.of.cohort[1] - combination.of.par$max.age[1] + 1), ncol = combination.of.par$max.age + 1, byrow=T)
data.tab <- as.data.frame(tmp.mat[,-1]); dimnames(data.tab)[[1]] <- tmp.mat[,1]; dimnames(data.tab)[[2]] <- scan("/tmp/output.txt", skip = line.start + 1, nlines =1)
data.tab
sim$nb.after.FirstHalfNatMort
round(sim$nb.after.FirstHalfNatMort,1)
data.tab
round(sim$nb.after.FirstHalfNatMort,1)
all(data.tab == round(sim$nb.after.FirstHalfNatMort,1))
head(data.tab)
head(sim$nb.after.FirstHalfNatMort)
head(round(sim$nb.after.FirstHalfNatMort,0))
head(round(sim$nb.after.FirstHalfNatMort,1))
head(data.tab)
head(round(sim$nb.after.FirstHalfNatMort,1))
source("SimulationStudy.R")
source("SimulationStudy.R")
getwd()
source("SimulationStudy.R")
source("SimulationStudy.R")
?scan
source("SimulationStudy.R")
data.tab
all(data.tab == round(sim$nb.after.FirstHalfNatMort,1))
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
data.tab
source("SimulationStudy.R")
all(data.tab == round(sim$nb.after.FirstHalfNatMort,1))
?all
all(almost.equal(data.tab, round(sim$nb.after.FirstHalfNatMort,1)))
all.equal(data.tab, round(sim$nb.after.FirstHalfNatMort,1))
all.equal(data.tab, round(sim$nb.after.FirstHalfNatMort,1), tol = 0)
all.equal(data.tab, round(sim$nb.after.FirstHalfNatMort,1), tol = 1)
all.equal(as.list(data.tab), as.list(sim$nb.after.FirstHalfNatMort,1), tol = 1)
head(data.tab)
head(sim$nb.after.FirstHalfNatMort)
all(data.tab == round(sim$nb.after.FirstHalfNatMort,0))
rm(list = ls())
source("SimulationStudy.R")
names(sim)
dim(sim$nb.at.beginningOfYearInterval")
dim(sim$nb.at.beginningOfYearInterval)
source("SimulationStudy.R")
par <- 1
par[2] <- 2
par
par(sim.rec = 1)
parameters("sim.rec" = 1)
parameters <- c("sim.rec" = 1)
param
param <- c("sim.rec" = 1)
parama
param
param <- c("Simulated.recruitment" = 1)
param
param[2] <- c("natural.mortality" = 1)
param
names(param)
is.vector(param)
param <- c("Simulated.recruitment" = round(runif(1, min = 1e5, max = 1e7),0))
param("Simulated.recruitment")
param["Simulated.recruitment"]
param$Simulated.recruitment
as.numeric(param$Simulated.recruitment)
as.numeric(param["Simulated.recruitment"])
source("SimulationFunctions.R")
###############################
# PARAMETERS OF THE SIMULATION
###############################
# Dimensions of the problem
max.age = 12
nb.of.preexploitation.years = 50
nb.of.years.of.fishing = 20
# Parameters of the model
param <- c("Simulated.recruitment" = round(runif(1, min = 1e5, max = 1e7),0))
cat(paste(as.numeric(param["Simulated.recruitment"]), ",", sep=""))
sim <-  Simulate.pulsefishing.Fishery2(max.age = max.age,  nb.of.preExploitation.years = nb.of.preexploitation.years, nb.of.exploitation.years = nb.of.years.of.fishing, exploitation.rate = c(0.2, 0.8), nat.mort.range = c(0.4, 0.4), recruitment.range=c(param["Simulated.recruitment"], param["Simulated.recruitment"]), log.para.range = c(8,12), log.parb.range = c(1,3), verbose = FALSE)
source("SimulationFunctions.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
ls
source("SimulationStudy.R")
rm(list = ls())
source("SimulationStudy.R")
rm(list = ls())
source("SimulationStudy.R")
source("SimulationStudy.R")
source("SimulationStudy.R")
?optimize
.Machine$double.eps^0.25
?optimize
q()
